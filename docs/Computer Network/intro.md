# Introduction

## 模型

### 教学的5层模型

![Screen Shot 2021-05-26 at 2.05.50 PM](intro.assets/Screen%20Shot%202021-05-26%20at%202.05.50%20PM.png)

应用层：

传输层：TCP/UDP 运行在终端上的

网络层：路由器

数据链路层：交换机，网桥？

物理层：集线器、中继器？

| 协议       | 功能               | 设备                       | 协议、服务类型                                               |
| ---------- | ------------------ | -------------------------- | ------------------------------------------------------------ |
| 应用层     |                    | （主机 OS 里）             |                                                              |
| 传输层     | 成“包”；进程之间   | （主机 OS 里）             | TCP（有连接有确认）；UDP（无连接无确认）                     |
| 网络层     | 成数据报； IP 之间 | 路由器（分隔广播域）       | IP （无连接无确认）；ICMP（无连接）……                        |
| 数据链路层 | 成帧； MAC 之间    | 网桥、交换机（分隔冲突域） | IEEE 802.3 Ethernet （无连接无确认）；IEEE 802.11 （无连接有确认） |
| 物理层     | 传 Bitstream       | 集线器                     |                                                              |



### TCP/IP 模型

![Screen Shot 2021-05-26 at 11.40.38 AM](intro.assets/Screen%20Shot%202021-05-26%20at%2011.40.38%20AM.png)

**ARPNET** 最终采用TCP和IP 为主要协议！

- Advanced Research Project Agency
- ARPNET 于 1969 年诞生，创新地采用了分组交换技术；
- 1983年ARPANET采用 TCP/IP

![Screen Shot 2021-05-26 at 2.04.19 PM](intro.assets/Screen%20Shot%202021-05-26%20at%202.04.19%20PM.png)

- 网络层：IP协议；无连接（直接传输数据）
- 传输层：无连接（UDP）+面向连接（TCP）

### OSI

理论成功，市场失败；因为有些功能在多个层中多次出现。

### 协议与服务

协议是对等实体之间的，水平的。

- 语法（syntax）：数据的格式（怎么讲）
- 语义（semantics）：规定要完成的功能（怎么理解/讲了什么/讲的东西意味着什么功能）
- 时序（synchronization）：规定各种操作的顺序

服务是垂直的。

## 分类

### 分布范围

广域网WAN：交换技术？

局域网LAN：广播技术？

### 交换技术

电路交换、报文交换、分组交换？

### 传输技术

广播式网络：共享公共通信信道？

点对点网络：存储转发 + 路由选择

## 标准化工作及组织

### RFC: Request For Comments

RFC是所有Internet标准的形式；但不是所有的RFC都是Internet标准

RFC成为Internet的流程：

- Internet草案
- 建议标准 Proposed Standard
- 草案标准（IETF、IAB审核）（已经取消）
- 成为因特网标准！

### 一些组织

国际标准化组织 ISO：提出OSI参考模型

国际电信联盟 ITU：指定通信规则？

国际电气电子工程师协会 IEEE：IEEE802？、5G

Internet 工程任务组 IETF：RFC XXXX

## 性能指标

### 速率/比特率

主机在数字信道上传送数据的速率。

速率单位 xbps 的换算都是1000！和存储容量的1024不同。

### 带宽

原来指的是某个信号具有的「频带宽度」，i.e. 最高、最低频率之差，Hz。

计网中指的是：网络中某通道传送数据的能力，即单位时间内网络中的某信道所能通过的「最高数据率」；同速率的单位。

### 包转发率

交换机或路由器等网络设备以包为单位的转发速率

线速转发：交换机端口在满负载的情况下，对帧进行转发时能够达到该端口线路的最高速度

### 时延

总时延 = 发送 + 传播 + 排队 + 处理

- 发送时延：数据长度 / 信道带宽（发送速率）；**主机**发送分组的第一个bit到最后一个bit发送完毕的时间
- 传播时延：信道长度 / 电磁波在信道上传播的速率
- 排队时延：在**路由器**缓存里等待
- 处理时延：**路由器**检错、找出口等操作的时间

### 时延带宽积

![Screen Shot 2021-05-26 at 11.49.23 AM](intro.assets/Screen%20Shot%202021-05-26%20at%2011.49.23%20AM.png)

### 往返时延 RTT

发送方发送完最后一个bit，到发送方接收到对面ACK确认的第一个bit的时间？（hw）

RTT = 2 * 传播时延 + 末端处理时间

### 利用率

#### 信道利用率

某信道有百分之几的时间是被利用的；**分子是发送时延！**

![Screen Shot 2021-05-26 at 10.29.24 PM](intro.assets/Screen%20Shot%202021-05-26%20at%2010.29.24%20PM.png)



网络利用率则是全网络的信道利用率的加权平均值（？怎么加权

## 数据交换方式

### 电路交换

e.g. 电话网络

- 建立连接（建立电路）
- 通信（独占资源）
- 释放连接（拆除电路）

优点：时延小；有序；无冲突；实时性强

缺点：建立连接时间长；信道利用率低；灵活性差（一个交换设备宕机就不行）；无差错控制

延迟计算：总时延 = 电路建立时间 + 报文长度 /  传输速率 + 传播时延

### 报文交换

存储转发，报文不切割，一发一整个。

优点：不用建立连接；动态分配线路；线路可靠性、利用率高；多目标服务（同时发给多个目的地址）

缺点：存储转发有时延；报文大小不定，需较大缓存空间

延迟计算：总时延 = 经过的段数 × ( 报文长度 /  传输速率 + 传播时延 )

### 分组交换

存储转发，将大数据块<u>分割</u>成小的数据块。

优点：每一块大小较小，提高了可靠性，易于存储管理

缺点：分组后需要传输额外的信息量；乱序到达时需排序重组

!!! tip "分组交换的延时**小于**报文交换"
    
    对于同样大小的原数据，忽略分组带来的额外开销，忽略传播时延：
    
    报文交换的延时：
    
    从主机发送到链路上： $t_0 = {\text{Data Size} \over \text{bit rate}$ 。
    
    每次存储转发，转发时发送到链路上仍为： $t_0$ 。
    
    经过 $N$ 个路由器，总延时： $(N+1)t_0$ 。
    
    分组交换的延时：
    
    从主机发送到链路上： $t_0$ 。
    
    只考虑最后一个分组，经过每个路由器的延时： $t_0 \over \text{number of packets}$ 。
    
    经过 $N$ 个路由器，总延时： $t_0 + N {t_0 \over \text{number of packets}}$ 。

![Screen Shot 2021-06-02 at 10.27.27 AM](intro.assets/Screen%20Shot%202021-06-02%20at%2010.27.27%20AM.png)

#### 数据报交换

Internet 采用；

无连接；

每个分组独立确定传输路径；

每个分组携带源地址（路由器从中可学习转发表）、目的地址（路由器选路转发）；

不保证分组的顺序。

延迟计算：

$$
\begin{align}
{ \over }
\end{align}
$$


#### 虚电路

结合数据报方式和电路方式。

建立一条源主机到目的主机类似电路的逻辑路径。

- 每个分组携带「虚电路号」，而非目的地址。
- 同一流的数据走同一条路。
- 保序。
- 路由器维护虚电路的状态信息。

